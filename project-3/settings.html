<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Settings</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <style>
    .layout-wrapper { display: flex; min-height: 100vh; }
    .sidebar { width: 220px; border-right: 1px solid #e9ecef; padding: 1rem; }
    .main-content { flex: 1; padding: 1.5rem; }
    /* simple theme hooks */
    :root { --bg: #ffffff; --fg: #212529; --card: #ffffff; }
    [data-theme="dark"] { --bg: #0b1220; --fg: #e6eef8; --card:#071028; }
    [data-theme="light"] { --bg: #ffffff; --fg: #212529; --card:#ffffff; }
    body { background: var(--bg); color: var(--fg); }
    .card { background: var(--card); border: 1px solid rgba(0,0,0,0.06); }
  </style>
</head>
<body>
  <div class="layout-wrapper">
    <aside class="sidebar p-3 d-flex flex-column flex-shrink-0">
      <div class="d-flex align-items-center mb-4 ps-2">
        <i class="fa-solid fa-robot fa-2x me-2 text-primary"></i>
        <div>
          <h6 class="mb-0 fw-bold">Resource Manager</h6>
          <small class="text-muted">Management Suite</small>
        </div>
      </div>

      <nav class="nav flex-column mb-auto">
        <a class="nav-link active" href="homepage.html"><i class="fa-solid fa-gauge-high me-3"></i>Dashboard</a>
        <a class="nav-link" href="profile.html"><i class="fa-solid fa-diagram-project me-3"></i>Profile</a>
      </nav>
    </aside>

    <div class="main-content">
      <h1 class="h5 mb-3">Settings</h1>

      <div class="card mb-3">
        <div class="card-body">
          <form id="settingsForm" class="mb-0">
            <div id="settingsAlert" class="alert d-none" role="alert" aria-live="polite"></div>

            <div class="mb-3">
              <label for="themeSelect" class="form-label">Theme</label>
              <select id="themeSelect" class="form-select">
        
                <option value="light">Light</option>
                <option value="dark">Dark</option>
              </select>
            </div>

            <div class="form-check form-switch mb-3">
              <input class="form-check-input" type="checkbox" id="emailNotif" checked>
              <label class="form-check-label" for="emailNotif">Email Notifications</label>
            </div>

            <div class="d-flex gap-2">
              <button type="button" id="saveSettingsBtn" class="btn btn-primary">Save</button>
              <button type="reset" class="btn btn-outline-secondary">Reset</button>
            </div>
          </form>
        </div>
      </div>

      <p class="text-muted small">Simple page to change theme and notification preference.</p>

       <a href="homepage.html" class="btn btn-secondary">
                  <i class="fa-solid fa-arrow-left me-2"></i>Back to Dashboard
                </a>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" defer></script>
  <script>
    // helper: apply theme to documentElement
    function applyTheme(mode) {
      const root = document.documentElement;
      if (mode === 'system') {
        // follow system preference
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        root.setAttribute('data-theme', prefersDark ? 'dark' : 'light');
      } else {
        root.setAttribute('data-theme', mode);
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      const saveBtn = document.getElementById('saveSettingsBtn');
      const alertEl = document.getElementById('settingsAlert');
      const themeSelect = document.getElementById('themeSelect');
      const emailNotif = document.getElementById('emailNotif');

      // load saved preferences
      const savedTheme = localStorage.getItem('theme') || 'system';
      const savedEmail = localStorage.getItem('emailNotif');
      themeSelect.value = savedTheme;
      if (savedEmail !== null) emailNotif.checked = savedEmail === 'true';

      // apply initially
      applyTheme(savedTheme);

      // react to system theme changes when 'system' selected
      const mq = window.matchMedia('(prefers-color-scheme: dark)');
      mq.addEventListener && mq.addEventListener('change', () => {
        if (themeSelect.value === 'system') applyTheme('system');
      });

      // apply immediately when user changes selection
      themeSelect.addEventListener('change', () => applyTheme(themeSelect.value));

      saveBtn.addEventListener('click', () => {
        localStorage.setItem('theme', themeSelect.value);
        localStorage.setItem('emailNotif', emailNotif.checked);
        // show inline success
        alertEl.className = 'alert alert-success alert-dismissible fade show';
        alertEl.innerHTML = 'Settings saved successfully.' +
          '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>';
      });
    });
  </script>
</body>
</html>